<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.ListView?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.belman.presentation.usecases.admin.usermanagement.UserManagementViewController"
           prefHeight="600.0" prefWidth="400.0"
           styleClass="user-management-view admin-view">

    <BorderPane>
        <!-- Header -->
        <top>
            <VBox spacing="10.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="header, section-header">
                    <Button fx:id="backButton" text="Back" styleClass="back-button, navigation-button" onAction="#handleBack"/>
                    <Label text="User Management" styleClass="title-label, section-title"/>
                </HBox>

                <!-- Search and Filter -->
                <HBox spacing="10.0" alignment="CENTER_LEFT" styleClass="search-filter-container">
                    <TextField fx:id="searchField" promptText="Search users..." HBox.hgrow="ALWAYS" styleClass="search-field, tablet-optimized-input"/>
                    <Button fx:id="searchButton" text="Search" styleClass="search-button, action-button" onAction="#handleSearch"/>
                    <ComboBox fx:id="roleFilterComboBox" promptText="Filter by role" styleClass="filter-combo, tablet-optimized-input"/>
                    <Button fx:id="addUserButton" text="Add User" styleClass="add-button, primary-button" onAction="#handleAddUser"/>
                </HBox>
            </VBox>
        </top>

        <!-- User List -->
        <center>
            <VBox spacing="10.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                </padding>

                <HBox spacing="10.0" alignment="CENTER_RIGHT" styleClass="action-buttons-container">
                    <Button fx:id="editUserButton" text="Edit User" styleClass="edit-button, secondary-button" onAction="#handleEditUser"/>
                    <Button fx:id="deleteUserButton" text="Delete User" styleClass="delete-button, danger-button" onAction="#handleDeleteUser"/>
                </HBox>

                <TableView fx:id="userTable" VBox.vgrow="ALWAYS" styleClass="user-table, data-table">
                    <placeholder>
                        <Label text="No users found" styleClass="placeholder-text"/>
                    </placeholder>
                    <columns>
                        <TableColumn fx:id="usernameColumn" text="Username" prefWidth="100.0" styleClass="username-column"/>
                        <TableColumn fx:id="nameColumn" text="Name" prefWidth="120.0" styleClass="name-column"/>
                        <TableColumn fx:id="emailColumn" text="Email" prefWidth="150.0" styleClass="email-column"/>
                        <TableColumn fx:id="roleColumn" text="Role" prefWidth="100.0" styleClass="role-column"/>
                        <TableColumn fx:id="statusColumn" text="Status" prefWidth="80.0" styleClass="status-column"/>
                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="100.0" styleClass="actions-column"/>
                    </columns>
                </TableView>
            </VBox>
        </center>

        <!-- Footer -->
        <bottom>
            <HBox alignment="CENTER_RIGHT" spacing="10.0" styleClass="footer, status-bar">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                </padding>
                <Label fx:id="totalUsersLabel" text="Total Users: 0" styleClass="status-label, info-text"/>
                <Label fx:id="errorLabel" text="" styleClass="error-message" visible="false"/>
            </HBox>
        </bottom>
    </BorderPane>
</StackPane>
