<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.belman.presentation.usecases.worker.capture.CaptureViewController"
           prefHeight="600.0" prefWidth="400.0"
           styleClass="capture-view">
    
    <BorderPane>
        <!-- Header -->
        <top>
            <VBox spacing="5.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="5.0" left="10.0"/>
                </padding>
                
                <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="header">
                    <Button fx:id="backButton" text="Back" styleClass="back-button"/>
                    <Label text="Capture Photo" styleClass="title-label"/>
                </HBox>
                
                <!-- Photo Info -->
                <HBox spacing="10.0" styleClass="photo-info">
                    <Label text="Photo:" styleClass="photo-label"/>
                    <Label fx:id="photoTypeLabel" text="Before Work" styleClass="photo-type"/>
                </HBox>
            </VBox>
        </top>
        
        <!-- Camera Preview -->
        <center>
            <StackPane styleClass="camera-preview-container">
                <!-- Camera Preview -->
                <ImageView fx:id="cameraPreview" fitWidth="400.0" fitHeight="400.0" preserveRatio="false"/>
                
                <!-- Camera Overlay -->
                <StackPane styleClass="camera-overlay">
                    <!-- Guide Lines -->
                    <VBox alignment="CENTER" spacing="0" styleClass="guide-lines-vertical">
                        <HBox alignment="CENTER" spacing="0" styleClass="guide-lines-horizontal"/>
                    </VBox>
                    
                    <!-- Camera Status -->
                    <VBox alignment="TOP_CENTER">
                        <padding>
                            <Insets top="10.0"/>
                        </padding>
                        <Label fx:id="cameraStatusLabel" text="Camera Ready" styleClass="camera-status-label"/>
                    </VBox>
                    
                    <!-- Template Overlay -->
                    <ImageView fx:id="templateOverlay" opacity="0.3" visible="false"/>
                    
                    <!-- Loading Indicator -->
                    <StackPane fx:id="loadingIndicator" visible="false" styleClass="loading-indicator">
                        <Label text="Processing..." styleClass="loading-text"/>
                    </StackPane>
                </StackPane>
            </StackPane>
        </center>
        
        <!-- Camera Controls -->
        <bottom>
            <VBox spacing="10.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="15.0" left="10.0"/>
                </padding>
                
                <!-- Photo Description -->
                <Label fx:id="photoDescriptionLabel" text="Capture the area before any welding work begins." 
                       wrapText="true" styleClass="photo-description"/>
                
                <!-- Camera Controls -->
                <HBox alignment="CENTER" spacing="20.0" styleClass="camera-controls">
                    <Button fx:id="flashButton" text="Flash" styleClass="flash-button"/>
                    <Button fx:id="captureButton" text="Capture" styleClass="capture-button"/>
                    <Button fx:id="switchCameraButton" text="Switch" styleClass="switch-camera-button"/>
                </HBox>
                
                <!-- Preview Controls (initially hidden) -->
                <HBox fx:id="previewControls" alignment="CENTER" spacing="20.0" styleClass="preview-controls" visible="false">
                    <Button fx:id="retakeButton" text="Retake" styleClass="retake-button"/>
                    <Button fx:id="acceptButton" text="Accept" styleClass="accept-button"/>
                </HBox>
            </VBox>
        </bottom>
    </BorderPane>
</StackPane>