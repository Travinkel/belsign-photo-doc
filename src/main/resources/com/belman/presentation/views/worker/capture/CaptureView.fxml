<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.belman.presentation.usecases.worker.capture.CaptureViewController"
           prefHeight="600.0" prefWidth="400.0"
           styleClass="capture-view">

    <BorderPane>
        <!-- Header -->
        <top>
            <VBox spacing="5.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="5.0" left="10.0"/>
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="header">
                    <Button fx:id="backButton" text="Back" styleClass="back-button"/>
                    <Label text="Capture Photo" styleClass="title-label"/>
                </HBox>

                <!-- Photo Info -->
                <HBox spacing="10.0" styleClass="photo-info">
                    <Label text="Photo:" styleClass="photo-label"/>
                    <Label fx:id="photoTypeLabel" text="Before Work" styleClass="photo-type"/>
                </HBox>

                <!-- Template Info -->
                <HBox spacing="10.0" styleClass="template-info">
                    <Label text="Template:" styleClass="template-label"/>
                    <Label fx:id="templateNameLabel" text="" styleClass="template-name"/>
                </HBox>

                <!-- Template Description -->
                <Label fx:id="templateDescriptionLabel" text="" styleClass="template-description" wrapText="true"/>

                <!-- Status and Error Messages -->
                <Label fx:id="statusLabel" text="" styleClass="status-label"/>
                <Label fx:id="errorLabel" text="" styleClass="error-label" visible="false"/>
            </VBox>
        </top>

        <!-- Mock Images Grid -->
        <center>
            <StackPane styleClass="mock-images-container">
                <!-- Mock Images Grid -->
                <ScrollPane fx:id="mockImagesScrollPane" fitToWidth="true" fitToHeight="true" styleClass="mock-images-scroll">
                    <content>
                        <GridPane fx:id="mockImagesGrid" hgap="10" vgap="10" styleClass="mock-images-grid">
                            <padding>
                                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                            </padding>
                        </GridPane>
                    </content>
                </ScrollPane>

                <!-- Image Preview (when an image is selected) -->
                <StackPane fx:id="imagePreviewPane" visible="false" styleClass="image-preview-pane">
                    <ImageView fx:id="previewImageView" fitWidth="400.0" fitHeight="400.0" preserveRatio="true"/>

                    <!-- Back to Grid Button -->
                    <VBox alignment="TOP_LEFT">
                        <padding>
                            <Insets top="10.0" left="10.0"/>
                        </padding>
                        <Button fx:id="backToGridButton" text="Back to Grid" styleClass="back-to-grid-button"/>
                    </VBox>
                </StackPane>

                <!-- Loading Indicator -->
                <StackPane fx:id="loadingIndicator" visible="false" styleClass="loading-indicator">
                    <Label text="Processing..." styleClass="loading-text"/>
                </StackPane>
            </StackPane>
        </center>

        <!-- Camera Controls -->
        <bottom>
            <VBox spacing="10.0">
                <padding>
                    <Insets top="10.0" right="10.0" bottom="15.0" left="10.0"/>
                </padding>

                <!-- Photo Description -->
                <Label fx:id="photoDescriptionLabel" text="Select a mock image to simulate taking a photo." 
                       wrapText="true" styleClass="photo-description"/>

                <!-- Mock Image Selection Instructions -->
                <Label text="Click on an image in the grid above to select it." 
                       wrapText="true" styleClass="mock-image-instructions"/>

                <!-- Preview Controls (initially hidden) -->
                <HBox fx:id="previewControls" alignment="CENTER" spacing="20.0" styleClass="preview-controls" visible="false">
                    <Button fx:id="selectAnotherButton" text="Select Another" styleClass="select-another-button"/>
                    <Button fx:id="confirmButton" text="Confirm Selection" styleClass="confirm-button"/>
                </HBox>
            </VBox>
        </bottom>
    </BorderPane>
</StackPane>
